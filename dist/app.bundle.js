!function(e){function t(r){if(i[r])return i[r].exports;var o=i[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={};t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=17)}([function(e,t,i){"use strict";function r(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json",s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n;$.ajax({url:e,data:t,type:i,dataType:r,async:s,success:a,error:l})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=function(e){console.log(e)},n=function(e){console.log(e.statusText)}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){(0,d.getPoints)("Alla","Alla","Alla",500)}function n(e){b&&(C.removeLayer(b),t.geojsonLayer=b={}),t.geojsonLayer=b=L.geoJSON(e,{pointToLayer:a,onEachFeature:s})}function s(e,t){var i="";e.properties&&(i+="Tradslag: "+e.properties.Tradslag+"</br>",i+="Stamomkret: "+e.properties.Stamomkret+" cm</br>",i+="Status: "+e.properties.Tradstatus+"</br>",i+="Plats: "+e.properties.Lokalnamn+"</br>",i+="Id: "+e.properties.Id+"</br>"),t.bindPopup(i)}function a(e,t){var i=(0,_.getPointSize)(e.properties.Stamomkret);return new L.CircleMarker(t,{radius:i,fillColor:(0,c.default)(e.properties.Tradslag),color:(0,c.default)(e.properties.Tradslag),weight:1,opacity:1,fillOpacity:1,clickable:!0})}function l(e){$(".legend.leaflet-control").empty();for(var t="",i=0;i<e.length;i++)"Alla"!=e[i].id&&(t+='<i style="background:'+(0,c.default)(e[i].id)+'"></i> '+e[i].id+"</br>");$(".legend.leaflet-control").html(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.updateGeojsonLayer=t.updateLegend=t.geojsonLayer=t.markers=t.sidebar=t.map=t.initMap=void 0,i(9);var u=i(11);r(u);i(21),i(10),i(8),i(12),i(13),i(14);var d=i(2),h=i(18),c=r(h),_=i(6),p=i(7),m=L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFyaWdlcnIiLCJhIjoiY2l6NDgxeDluMDAxcjJ3cGozOW1tZnV0NCJ9.Eb2mDsjDBmza-uhme0TLSA",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',id:"mapbox.streets"}),f=L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFyaWdlcnIiLCJhIjoiY2l6NDgxeDluMDAxcjJ3cGozOW1tZnV0NCJ9.Eb2mDsjDBmza-uhme0TLSA",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',id:"mapbox.satellite"}),g={Topo:m,Satellite:f},y=L.map("map",{layers:[m]});L.control.layers(g,{},{position:"topleft"}).addTo(y);var v=L.control.sidebar("sidebar",{position:"right"}).addTo(y),C=L.markerClusterGroup({showCoverageOnHover:!1,maxClusterRadius:80,disableClusteringAtZoom:8,spiderfyOnMaxZoom:!1}),b=L.geoJSON().addTo(y),k=L.control({position:"topleft"});k.onAdd=function(e){for(var t=L.DomUtil.create("div","legend"),i=1;i<p.trees.length;i++)t.innerHTML+='<i style="background:'+(0,c.default)(p.trees[i].id)+'"></i> '+p.trees[i].id+"</br>";return t},k.addTo(y),t.initMap=o,t.map=y,t.sidebar=v,t.markers=C,t.geojsonLayer=b,t.updateLegend=l,t.updateGeojsonLayer=n},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Alla",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Alla",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Alla",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3,o=(0,f.default)(e,t,i),s=(0,u.default)(),a=s.data;a.where=o,a.resultRecordCount=r;var l=n;(0,c.default)(s.url,a,s.type,s.datatype,!0,l,s.error)}function n(e){g=e.features.length,1e3==e.features.length&&($("#results").html("Too many results</br>Only showing first 1000<br/>Try narrowing query"),$("#results").show(),console.log("over 1000 hits")),a=(0,p.default)(e.features),(0,d.updateGeojsonLayer)(a),d.markers.addLayer(d.geojsonLayer),d.map.addLayer(d.markers);var t=d.markers.getBounds();s(t)<.005?d.map.setView(t.getCenter(),12):d.map.fitBounds(t)}function s(e){var t=d.markers.getBounds().toBBoxString().split(",");Math.abs((t[0]-t[2])*(t[1]-t[3]))}Object.defineProperty(t,"__esModule",{value:!0}),t.getPointsSuccess=t.getPoints=void 0;var a,l=i(4),u=r(l),d=i(1),h=i(0),c=r(h),_=i(20),p=r(_),m=i(3),f=r(m),g=1e3;t.getPoints=o,t.getPointsSuccess=n},function(e,t,i){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Alla",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Alla",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Alla",r=(0,n.getRegionQueryText)(e),a=(0,o.getCircumferenceQueryText)(t),l=(0,s.getTreetypeQueryText)(i);return[r,l,a].join(" AND ")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=i(6),n=i(15),s=i(7)},function(e,t,i){"use strict";function r(){return{url:"https://ext-planeringsunderlag.lansstyrelsen.se/arcgis/rest/services/vektor/LSTF_webbgis_planeringsunderlag/MapServer/58/query",data:{where:"Kommun IS NOT NULL",outFields:"OBJECTID_1, Kommun,Lokalnamn,Tradslag,Stamomkret,Tradstatus",geometryType:"esriGeometryEnvelope",spatialRel:"esriSpatialRelIntersects",returnGeometry:!0,returnTrueCurves:!1,returnIdsOnly:!1,returnCountOnly:!1,returnZ:!1,returnM:!1,returnDistinctValues:!1,resultRecordCount:null,orderByFields:"Stamomkret DESC",outStatistics:null,outSR:4326,f:"pjson"},type:"GET",datatype:"json",success:function(e){console.log(e)},error:function(e){console.log(e.statusText)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.lanstyrDefault=r},function(e,t,i){"use strict";function r(e,t){var i=e+" option";$(i).length>0&&$(e).empty();var r=$(e),o=document.createDocumentFragment();$.each(t,function(e){var i=document.createElement("option");i.innerHTML=t[e].label,i.value=t[e].id,o.appendChild(i)}),r.append(o)}function o(){var e=[{div:".circumference-select",arr:l.circumference},{div:".region-select",arr:u.regions},{div:".treetype-select",arr:d.trees},{div:".stat-select",arr:h.stats}];$.each(e,function(e,t){r(t.div,t.arr)}),n()}function n(){$(".filterSelect").change(function(e){$("#results").hide();var t=$(".circumference-select").val(),i=$(".region-select").val(),r=$(".treetype-select").val();(0,a.getPoints)(i,t,r),s(i,t,r,e.target.classList[1])}),$(".statpaneSelect").change(function(e){var t=$(".stat-select").val();"top10ByKommun"==t||"MostCommonByKommun"==t?$(".statpaneSelectRegionwrapper").show():"top10JKPG"==t?(0,h.showTop10)("Alla"):"MostCommonJKPG"==t?(0,h.showMostCommon)("Alla"):console.log("stat select error")}),$(".statpaneSelect.region-select").change(function(e){var t=$(".stat-select").val(),i=$(".statpaneSelect.region-select").val();"top10ByKommun"==t?(0,h.showTop10)(i):"MostCommonByKommun"==t?(0,h.showMostCommon)(i):console.log("stat select error")})}function s(e,t,i,r){"Alla"==t&&"circumference-select"!=r&&(0,l.getCircumferenceRange)(e,t,i),"Alla"==i&&"treetype-select"!=r&&(0,d.getTrees)(e,t,i),"Alla"==e&&"region-select"!=r&&(0,u.getRegions)(e,t,i)}Object.defineProperty(t,"__esModule",{value:!0}),t.updateDropdowns=t.addDropdowns=t.createSelect=void 0;var a=i(2),l=i(6),u=i(15),d=i(7),h=(i(1),i(19));t.createSelect=r,t.addDropdowns=o,t.updateDropdowns=s},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getPointSize(Stamomkret){return eval(circumference[1].range)?circumference[1].pointsize:eval(circumference[2].range)?circumference[2].pointsize:eval(circumference[3].range)?circumference[3].pointsize:eval(circumference[4].range)?circumference[4].pointsize:eval(circumference[5].range)?circumference[5].pointsize:3}function getCircumferenceQueryText(e){return e==circumference[0].id?"("+circumference[0].querytext+")":e==circumference[1].id?"("+circumference[1].querytext+")":e==circumference[2].id?"("+circumference[2].querytext+")":e==circumference[3].id?"("+circumference[3].querytext+")":e==circumference[4].id?"("+circumference[4].querytext+")":e==circumference[5].id?"("+circumference[5].querytext+")":"(Stamomkret > 0)"}function getCircumferenceRange(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Alla",r=JSON.stringify([{statisticType:"min",onStatisticField:"Stamomkret",outStatisticFieldName:"minStamomkret"},{statisticType:"max",onStatisticField:"Stamomkret",outStatisticFieldName:"maxStamomkret"}]),o=(0,_getWhereCond2.default)(e,t,i),n=(0,_lanstyrDefault2.default)(),s=getCircumSuccess,a=n.data;a.where=o,a.outStatistics=r,a.returnGeometry=!1,a.outSR=null,a.orderByFields=null,(0,_makeAjaxCall2.default)(n.url,a,n.type,n.datatyp,n.async,s,n.error)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPointSize=exports.getCircumferenceRange=exports.getCircumferenceQueryText=exports.circumference=void 0;var _makeAjaxCall=__webpack_require__(0),_makeAjaxCall2=_interopRequireDefault(_makeAjaxCall),_lanstyrDefault=__webpack_require__(4),_lanstyrDefault2=_interopRequireDefault(_lanstyrDefault),_getWhereCond=__webpack_require__(3),_getWhereCond2=_interopRequireDefault(_getWhereCond),_select=__webpack_require__(5),circumference=[{range:"Stamomkret > 0 ",querytext:"Stamomkret > 0",pointsize:null,id:"Alla",label:"Alla"},{range:"Stamomkret > 0 && Stamomkret < 250",querytext:"Stamomkret BETWEEN 0 AND 250",pointsize:3,id:"1",label:"Under 250 cm"},{range:"Stamomkret >= 250 && Stamomkret < 500",querytext:"Stamomkret BETWEEN 251 AND 500",pointsize:5,id:"2",label:"250-500 cm"},{range:"Stamomkret >= 500 && Stamomkret < 750",querytext:"Stamomkret BETWEEN 501 AND 750",pointsize:7,id:"5",label:"500-750"},{range:"Stamomkret >= 750 && Stamomkret < 1000",querytext:"Stamomkret BETWEEN 751 AND 1000",pointsize:10,id:"7",label:"750-1000"},{range:"Stamomkret > 1000",querytext:"Stamomkret > 1000",pointsize:10,id:"10",label:"Over 1000 cm"}],getCircumSuccess=function getCircumSuccess(response){var Stamomkret=response.features[0].attributes.maxStamomkret,filteredCircumference=[],i=circumference.length-1;for(i;i>0;i--)if(eval(circumference[i].range)){filteredCircumference=circumference.slice(0,i+1);break}(0,_select.createSelect)(".circumference-select",filteredCircumference)};exports.circumference=circumference,exports.getCircumferenceQueryText=getCircumferenceQueryText,exports.getCircumferenceRange=getCircumferenceRange,exports.getPointSize=getPointSize},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t;return $.each(p,function(i,r){if(p[i].id==e)return t="("+p[i].querytext+")",!1}),t}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Alla",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Alla",r=(0,a.default)(e,t,i),o=(0,h.default)(),n=m,s=o.data;s.where=r,s.returnGeometry=!1,s.outSR=null,s.outFields="Tradslag",s.orderByFields="Tradslag",s.returnDistinctValues=!0,(0,u.default)(o.url,s,o.type,o.datatyp,o.async,n,o.error)}Object.defineProperty(t,"__esModule",{value:!0}),t.getTrees=t.getTreetypeQueryText=t.trees=void 0;var s=i(3),a=r(s),l=i(0),u=r(l),d=i(4),h=r(d),c=i(5),_=i(1),p=[{matchWith:/really hard/gi,id:"Alla",querytext:"Tradslag is not null",label:"Alla"},{matchWith:/al$/gi,id:"Al",querytext:"Tradslag like '%Al'",label:"Al"},{matchWith:/alm/gi,id:"Alm",querytext:"Tradslag like '%Alm%'",label:"Alm"},{matchWith:/ask/gi,id:"Ask",querytext:"Tradslag like '%Ask%'",label:"Ask"},{matchWith:/asp/gi,id:"Asp",querytext:"Tradslag = 'Asp'",label:"Asp"},{matchWith:/apel/gi,id:"Äpple",querytext:"(Tradslag like '%Apel%' OR Tradslag like '%Äpple%'",label:"Äpple"},{matchWith:/avenbok/gi,id:"Avenbok",querytext:"Tradslag like '%Avenbok%'",label:"Avenbok"},{matchWith:/björk/gi,id:"Björk",querytext:"Tradslag like '%Björk%'",label:"Björk"},{matchWith:/bok/gi,id:"Bok",querytext:"Tradslag like '%Bok%'",label:"Bok"},{matchWith:/ek/gi,id:"Ek",querytext:"Tradslag like '%Ek%'",label:"Ek"},{matchWith:/en/gi,id:"En",querytext:"Tradslag='En' OR Tradslag='Kungsen'",label:"En"},{matchWith:/gran/gi,id:"Gran",querytext:"Tradslag like '%Gran%'",label:"Gran"},{matchWith:/hassel/gi,id:"Hassel",querytext:"Tradslag like '%Hassel%'",label:"Hassel"},{matchWith:/hagtorn/gi,id:"Hagtorn",querytext:"Tradslag like '%Hagtorn%'",label:"Hagtorn"},{matchWith:/idegran/gi,id:"Idegran",querytext:"Tradslag='Idegran'",label:"Idegran"},{matchWith:/körsbär/gi,id:"Körsbär",querytext:"Tradslag like '%Körsbär%'OR Tradslag='Hägg' OR Tradslag='Fågelbär'",label:"Körsbär"},{matchWith:/kastanj/gi,id:"Kastanj",querytext:"Tradslag like '%Kastanj'",label:"Kastanj"},{matchWith:/lärk/gi,id:"Lärk",querytext:"Tradslag like '%Lärk'",label:"Lärk"},{matchWith:/lönn/gi,id:"Lönn",querytext:"Tradslag like '%Lönn'",label:"Lönn"},{matchWith:/lind/gi,id:"Lind",querytext:"Tradslag like '%Lind%'",label:"Lind"},{matchWith:/oxel/gi,id:"Oxel",querytext:"Tradslag like 'Oxel'",label:"Oxel"},{matchWith:/päron/gi,id:"Päron",querytext:"Tradslag like 'Päron'",label:"Päron"},{matchWith:/pil/gi,id:"Pil",querytext:"Tradslag like '%Pil%' OR Tradslag like '%Salix%' OR Tradslag = 'Jolster' OR Tradslag = 'Sälg' OR Tradslag = 'Vide'",label:"Pil"},{matchWith:/poppel/gi,id:"Poppel",querytext:"Tradslag like '%Poppel' OR Tradslag = 'Populus sp'",label:"Poppel"},{matchWith:/rönn/gi,id:"Rönn",querytext:"Tradslag = 'Rönn'",label:"Rönn"},{matchWith:/tall/gi,id:"Tall",querytext:"Tradslag like '%Tall'",label:"Tall"},{matchWith:/annat/gi,id:"Annat",querytext:"Tradslag like 'Övrig%' OR Tradslag = 'Annat' OR Tradslag = 'Obestämd' OR Tradslag = 'Okänt'",label:"Annat/Obestämd"}],m=function(e){var t=[];$.each(e.features,function(e,i){t.push(i.attributes.Tradslag)});var i,r,o=[];for(i=0;i<t.length;i++)for(r=0;r<p.length;r++)if(p[r].matchWith.test(t[i])){o.push(p[r]);break}for(o.sort(function(e,t){return e.id>t.id?1:t.id>e.id?-1:0}),i=0;i<o.length-1;i++)o[i].id==o[i+1].id&&(o.splice(i,1),i--);o.unshift({matchWith:/really hard/gi,id:"Alla",querytext:"Tradslag is not null",label:"Alla"}),(0,c.createSelect)(".treetype-select",o),(0,_.updateLegend)(o)};t.trees=p,t.getTreetypeQueryText=o,t.getTrees=n},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){!function(e,t,i){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,i=this._zoom;if(e.__parent)for(;t.__parent._zoom>=i;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):e.getLatLng?this._map?e.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e}),this):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e}),this)},addLayers:function(e,t){if(!L.Util.isArray(e))return this.addLayer(e);var i,r=this._featureGroup,o=this._nonPointGroup,n=this.options.chunkedLoading,s=this.options.chunkInterval,a=this.options.chunkProgress,l=e.length,u=0,d=!0;if(this._map){var h=(new Date).getTime(),c=L.bind(function(){for(var _=(new Date).getTime();l>u;u++){if(n&&0==u%200){if((new Date).getTime()-_>s)break}if((i=e[u])instanceof L.LayerGroup)d&&(e=e.slice(),d=!1),this._extractNonGroupLayers(i,e),l=e.length;else if(i.getLatLng){if(!this.hasLayer(i)&&(this._addLayer(i,this._maxZoom),t||this.fire("layeradd",{layer:i}),i.__parent&&2===i.__parent.getChildCount())){var p=i.__parent.getAllChildMarkers(),m=p[0]===i?p[1]:p[0];r.removeLayer(m)}}else o.addLayer(i),t||this.fire("layeradd",{layer:i})}a&&a(u,l,(new Date).getTime()-h),u===l?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(c,this.options.chunkDelay)},this);c()}else for(var _=this._needsClustering;l>u;u++)i=e[u],i instanceof L.LayerGroup?(d&&(e=e.slice(),d=!1),this._extractNonGroupLayers(i,e),l=e.length):i.getLatLng?this.hasLayer(i)||_.push(i):o.addLayer(i);return this},removeLayers:function(e){var t,i,r=e.length,o=this._featureGroup,n=this._nonPointGroup,s=!0;if(!this._map){for(t=0;r>t;t++)i=e[t],i instanceof L.LayerGroup?(s&&(e=e.slice(),s=!1),this._extractNonGroupLayers(i,e),r=e.length):(this._arraySplice(this._needsClustering,i),n.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i}));return this}if(this._unspiderfy){this._unspiderfy();var a=e.slice(),l=r;for(t=0;l>t;t++)i=a[t],i instanceof L.LayerGroup?(this._extractNonGroupLayers(i,a),l=a.length):this._unspiderfyLayer(i)}for(t=0;r>t;t++)i=e[t],i instanceof L.LayerGroup?(s&&(e=e.slice(),s=!1),this._extractNonGroupLayers(i,e),r=e.length):i.__parent?(this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),o.hasLayer(i)&&(o.removeLayer(i),i.clusterShow&&i.clusterShow())):(n.removeLayer(i),this.fire("layerremove",{layer:i}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;t>=0;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var i,r,o,n=this._needsClustering.slice(),s=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(n),r=n.length-1;r>=0;r--){for(i=!0,o=s.length-1;o>=0;o--)if(s[o].layer===n[r]){i=!1;break}i&&e.call(t,n[r])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer(function(i){L.stamp(i)===e&&(t=i)}),t},hasLayer:function(e){if(!e)return!1;var t,i=this._needsClustering;for(t=i.length-1;t>=0;t--)if(i[t]===e)return!0;for(i=this._needsRemoving,t=i.length-1;t>=0;t--)if(i[t].layer===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){"function"!=typeof t&&(t=function(){});var i=function(){!e._icon&&!e.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",i,this),this.off("animationend",i,this),e._icon?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?t():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",i,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",i,this),this.on("animationend",i,this),e.__parent.zoomToBounds())},onAdd:function(e){this._map=e;var t,i,r;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,i=this._needsRemoving.length;i>t;t++)r=this._needsRemoving[t],r.newlatlng=r.layer._latlng,r.layer._latlng=r.latlng;for(t=0,i=this._needsRemoving.length;i>t;t++)r=this._needsRemoving[t],this._removeLayer(r.layer,!0),r.layer._latlng=r.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var i=e.length-1;i>=0;i--)if(e[i]===t)return e.splice(i,1),!0},_removeFromGridUnclustered:function(e,t){for(var i=this._map,r=this._gridUnclustered,o=this._map.getMinZoom();t>=o&&r[t].removeObject(e,i.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,i){e._latlng=t,this.removeLayer(e),e._latlng=i,this.addLayer(e)},_childMarkerDragEnd:function(e){e.target.__dragStart&&this._moveChild(e.target,e.target.__dragStart,e.target._latlng),delete e.target.__dragStart},_removeLayer:function(e,t,i){var r=this._gridClusters,o=this._gridUnclustered,n=this._featureGroup,s=this._map,a=this._map.getMinZoom();t&&this._removeFromGridUnclustered(e,this._maxZoom);var l,u=e.__parent,d=u._markers;for(this._arraySplice(d,e);u&&(u._childCount--,u._boundsNeedUpdate=!0,!(u._zoom<a));)t&&u._childCount<=1?(l=u._markers[0]===e?u._markers[1]:u._markers[0],r[u._zoom].removeObject(u,s.project(u._cLatLng,u._zoom)),o[u._zoom].addObject(l,s.project(l.getLatLng(),u._zoom)),this._arraySplice(u.__parent._childClusters,u),u.__parent._markers.push(l),l.__parent=u.__parent,u._icon&&(n.removeLayer(u),i||n.addLayer(l))):u._iconNeedsUpdate=!0,u=u.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,i){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,i)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),i=" marker-cluster-";return i+=10>t?"small":100>t?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,r=this.options.zoomToBoundsOnClick;(t||r)&&this.on("clusterclick",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){for(var t=e.layer,i=t;1===i._childClusters.length;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),e.originalEvent&&13===e.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),e.layer.getChildCount()>2&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,r=this._map;(e||i)&&this.off("clusterclick",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),r.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._map.getMinZoom(),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=this._map.getMaxZoom(),t=this._map.getMinZoom(),i=this.options.maxClusterRadius,r=i;"function"!=typeof i&&(r=function(){return i}),this.options.disableClusteringAtZoom&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var o=e;o>=t;o--)this._gridClusters[o]=new L.DistanceGrid(r(o)),this._gridUnclustered[o]=new L.DistanceGrid(r(o));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var i,r,o=this._gridClusters,n=this._gridUnclustered,s=this._map.getMinZoom();for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);t>=s;t--){i=this._map.project(e.getLatLng(),t);var a=o[t].getNearObject(i);if(a)return a._addChild(e),void(e.__parent=a);if(a=n[t].getNearObject(i)){var l=a.__parent;l&&this._removeLayer(a,!1);var u=new this._markerCluster(this,t,a,e);o[t].addObject(u,this._map.project(u._cLatLng,t)),a.__parent=u,e.__parent=u;var d=u;for(r=t-1;r>l._zoom;r--)d=new this._markerCluster(this,r,d),o[r].addObject(d,this._map.project(a.getLatLng(),r));return l._addChild(d),void this._removeFromGridUnclustered(a,t)}n[t].addObject(e,i)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._map.getMinZoom(),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return t!==i&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(2===t._childCount){t._addToMap();var i=t.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var i,r=e.getLayers(),o=0;for(t=t||[];o<r.length;o++)i=r[o],i instanceof L.LayerGroup?this._extractNonGroupLayers(i,t):t.push(i);return t},_overrideMarkerIcon:function(e){return e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}})}}),L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._map.getMinZoom(),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._map.getMinZoom(),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var i,r=this._getExpandedVisibleBounds(),o=this._featureGroup,n=this._map.getMinZoom();this._ignoreMove=!0,this._topClusterLevel._recursively(r,e,n,function(n){var s,a=n._latlng,l=n._markers;for(r.contains(a)||(a=null),n._isSingleParent()&&e+1===t?(o.removeLayer(n),n._recursivelyAddChildrenToMap(null,t,r)):(n.clusterHide(),n._recursivelyAddChildrenToMap(a,t,r)),i=l.length-1;i>=0;i--)s=l[i],r.contains(s._latlng)||o.removeLayer(s)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(r,t),o.eachLayer(function(e){e instanceof L.MarkerCluster||!e._icon||e.clusterShow()}),this._topClusterLevel._recursively(r,e,t,function(e){e._recursivelyRestoreChildPositions(t)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(r,e,n,function(e){o.removeLayer(e),e.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._map.getMinZoom(),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var i=this,r=this._featureGroup;r.addLayer(e),t!==e&&(t._childCount>2?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){r.removeLayer(e),e.clusterShow(),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,t,i){var r=this._getExpandedVisibleBounds(),o=this._map.getMinZoom();e._recursivelyAnimateChildrenInAndAddSelfToMap(r,o,t+1,i);var n=this;this._forceLayout(),e._recursivelyBecomeVisible(r,i),this._enqueue(function(){if(1===e._childCount){var s=e._markers[0];this._ignoreMove=!0,s.setLatLng(s.getLatLng()),this._ignoreMove=!1,s.clusterShow&&s.clusterShow()}else e._recursively(r,i,o,function(e){e._recursivelyRemoveChildrenFromMap(r,o,t+1)});n._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(t.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)},L.MarkerCluster=L.Marker.extend({initialize:function(e,t,i,r){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),r&&this._addChild(r)},getAllChildMarkers:function(e){e=e||[];for(var t=this._childClusters.length-1;t>=0;t--)this._childClusters[t].getAllChildMarkers(e);for(var i=this._markers.length-1;i>=0;i--)e.push(this._markers[i]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(){for(var e,t=this._childClusters.slice(),i=this._group._map,r=i.getBoundsZoom(this._bounds),o=this._zoom+1,n=i.getZoom();t.length>0&&r>o;){o++;var s=[];for(e=0;e<t.length;e++)s=s.concat(t[e]._childClusters);t=s}r>o?this._group._map.setView(this._latlng,o):n>=r?this._group._map.setView(this._latlng,n+1):this._group._map.fitBounds(this._bounds)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e,t,i,r,o=this._markers,n=this._childClusters,s=0,a=0,l=this._childCount;if(0!==l){for(this._resetBounds(),e=0;e<o.length;e++)i=o[e]._latlng,this._bounds.extend(i),s+=i.lat,a+=i.lng;for(e=0;e<n.length;e++)t=n[e],t._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),i=t._wLatLng,r=t._childCount,s+=i.lat*r,a+=i.lng*r;this._latlng=this._wLatLng=new L.LatLng(s/l,a/l),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,i){this._recursively(e,this._group._map.getMinZoom(),i-1,function(e){var i,r,o=e._markers;for(i=o.length-1;i>=0;i--)r=o[i],r._icon&&(r._setPos(t),r.clusterHide())},function(e){var i,r,o=e._childClusters;for(i=o.length-1;i>=0;i--)r=o[i],r._icon&&(r._setPos(t),r.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,i,r){this._recursively(e,r,t,function(o){o._recursivelyAnimateChildrenIn(e,o._group._map.latLngToLayerPoint(o.getLatLng()).round(),i),o._isSingleParent()&&i-1===r?(o.clusterShow(),o._recursivelyRemoveChildrenFromMap(e,t,i)):o.clusterHide(),o._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,function(e){e.clusterShow()})},_recursivelyAddChildrenToMap:function(e,t,i){this._recursively(i,this._group._map.getMinZoom()-1,t,function(r){if(t!==r._zoom)for(var o=r._markers.length-1;o>=0;o--){var n=r._markers[o];i.contains(n._latlng)&&(e&&(n._backupLatlng=n.getLatLng(),n.setLatLng(e),n.clusterHide&&n.clusterHide()),r._group._featureGroup.addLayer(n))}},function(t){t._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;t>=0;t--){var i=this._markers[t];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(e-1===this._zoom)for(var r=this._childClusters.length-1;r>=0;r--)this._childClusters[r]._restorePosition();else for(var o=this._childClusters.length-1;o>=0;o--)this._childClusters[o]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,i,r){var o,n;this._recursively(e,t-1,i-1,function(e){for(n=e._markers.length-1;n>=0;n--)o=e._markers[n],r&&r.contains(o._latlng)||(e._group._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow())},function(e){for(n=e._childClusters.length-1;n>=0;n--)o=e._childClusters[n],r&&r.contains(o._latlng)||(e._group._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow())})},_recursively:function(e,t,i,r,o){var n,s,a=this._childClusters,l=this._zoom;if(l>=t&&(r&&r(this),o&&l===i&&o(this)),t>l||i>l)for(n=a.length-1;n>=0;n--)s=a[n],e.intersects(s._bounds)&&s._recursively(e,t,i,r,o)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.Marker.include({clusterHide:function(){return this.options.opacityWhenUnclustered=this.options.opacity||1,this.setOpacity(0)},clusterShow:function(){var e=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);return delete this.options.opacityWhenUnclustered,e}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var i=this._getCoord(t.x),r=this._getCoord(t.y),o=this._grid,n=o[r]=o[r]||{},s=n[i]=n[i]||[],a=L.Util.stamp(e);this._objectPoint[a]=t,s.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var i,r,o=this._getCoord(t.x),n=this._getCoord(t.y),s=this._grid,a=s[n]=s[n]||{},l=a[o]=a[o]||[];for(delete this._objectPoint[L.Util.stamp(e)],i=0,r=l.length;r>i;i++)if(l[i]===e)return l.splice(i,1),1===r&&delete a[o],!0},eachObject:function(e,t){var i,r,o,n,s,a,l=this._grid;for(i in l){s=l[i];for(r in s)for(a=s[r],o=0,n=a.length;n>o;o++)e.call(t,a[o])&&(o--,n--)}},getNearObject:function(e){var t,i,r,o,n,s,a,l,u=this._getCoord(e.x),d=this._getCoord(e.y),h=this._objectPoint,c=this._sqCellSize,_=null;for(t=d-1;d+1>=t;t++)if(o=this._grid[t])for(i=u-1;u+1>=i;i++)if(n=o[i])for(r=0,s=n.length;s>r;r++)a=n[r],l=this._sqDist(h[L.Util.stamp(a)],e),c>l&&(c=l,_=a);return _},_getCoord:function(e){return Math.floor(e/this._cellSize)},_sqDist:function(e,t){var i=t.x-e.x,r=t.y-e.y;return i*i+r*r}},function(){L.QuickHull={getDistant:function(e,t){var i=t[1].lat-t[0].lat;return(t[0].lng-t[1].lng)*(e.lat-t[0].lat)+i*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var i,r,o,n=0,s=null,a=[];for(i=t.length-1;i>=0;i--)r=t[i],(o=this.getDistant(r,e))>0&&(a.push(r),o>n&&(n=o,s=r));return{maxPoint:s,newPoints:a}},buildConvexHull:function(e,t){var i=[],r=this.findMostDistantPointFromBaseLine(e,t);return r.maxPoint?(i=i.concat(this.buildConvexHull([e[0],r.maxPoint],r.newPoints)),i=i.concat(this.buildConvexHull([r.maxPoint,e[1]],r.newPoints))):[e[0]]},getConvexHull:function(e){var t,i=!1,r=!1,o=!1,n=!1,s=null,a=null,l=null,u=null,d=null,h=null;for(t=e.length-1;t>=0;t--){var c=e[t];(!1===i||c.lat>i)&&(s=c,i=c.lat),(!1===r||c.lat<r)&&(a=c,r=c.lat),(!1===o||c.lng>o)&&(l=c,o=c.lng),(!1===n||c.lng<n)&&(u=c,n=c.lng)}return r!==i?(h=a,d=s):(h=u,d=l),[].concat(this.buildConvexHull([h,d],e),this.buildConvexHull([d,h],e))}}}(),L.MarkerCluster.include({getConvexHull:function(){var e,t,i=this.getAllChildMarkers(),r=[];for(t=i.length-1;t>=0;t--)e=i[t].getLatLng(),r.push(e);return L.QuickHull.getConvexHull(r)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(),i=this._group,r=i._map,o=r.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,t.length>=this._circleSpiralSwitchover?e=this._generatePointsSpiral(t.length,o):(o.y+=10,e=this._generatePointsCircle(t.length,o)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var i,r,o=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e),n=o/this._2PI,s=this._2PI/e,a=[];for(a.length=e,i=e-1;i>=0;i--)r=this._circleStartAngle+i*s,a[i]=new L.Point(t.x+n*Math.cos(r),t.y+n*Math.sin(r))._round();return a},_generatePointsSpiral:function(e,t){var i,r=this._group.options.spiderfyDistanceMultiplier,o=r*this._spiralLengthStart,n=r*this._spiralFootSeparation,s=r*this._spiralLengthFactor*this._2PI,a=0,l=[];for(l.length=e,i=e-1;i>=0;i--)a+=n/o+5e-4*i,l[i]=new L.Point(t.x+o*Math.cos(a),t.y+o*Math.sin(a))._round(),o+=s/a;return l},_noanimationUnspiderfy:function(){var e,t,i=this._group,r=i._map,o=i._featureGroup,n=this.getAllChildMarkers();for(i._ignoreMove=!0,this.setOpacity(1),t=n.length-1;t>=0;t--)e=n[t],o.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(r.removeLayer(e._spiderLeg),delete e._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:n}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var i,r,o,n,s=this._group,a=s._map,l=s._featureGroup,u=this._group.options.spiderLegPolylineOptions;for(s._ignoreMove=!0,i=0;i<e.length;i++)n=a.layerPointToLatLng(t[i]),r=e[i],o=new L.Polyline([this._latlng,n],u),a.addLayer(o),r._spiderLeg=o,r._preSpiderfyLatlng=r._latlng,r.setLatLng(n),r.setZIndexOffset&&r.setZIndexOffset(1e6),l.addLayer(r);this.setOpacity(.3),s._ignoreMove=!1,s.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var r,o,n,s,a,l,u=this,d=this._group,h=d._map,c=d._featureGroup,_=this._latlng,p=h.latLngToLayerPoint(_),m=L.Path.SVG,f=L.extend({},this._group.options.spiderLegPolylineOptions),g=f.opacity;for(g===i&&(g=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),m?(f.opacity=0,f.className=(f.className||"")+" leaflet-cluster-spider-leg"):f.opacity=g,d._ignoreMove=!0,r=0;r<e.length;r++)o=e[r],l=h.layerPointToLatLng(t[r]),n=new L.Polyline([_,l],f),h.addLayer(n),o._spiderLeg=n,m&&(s=n._path,a=s.getTotalLength()+.1,s.style.strokeDasharray=a,s.style.strokeDashoffset=a),o.setZIndexOffset&&o.setZIndexOffset(1e6),o.clusterHide&&o.clusterHide(),c.addLayer(o),o._setPos&&o._setPos(p);for(d._forceLayout(),d._animationStart(),r=e.length-1;r>=0;r--)l=h.layerPointToLatLng(t[r]),o=e[r],o._preSpiderfyLatlng=o._latlng,o.setLatLng(l),o.clusterShow&&o.clusterShow(),m&&(n=o._spiderLeg,s=n._path,s.style.strokeDashoffset=0,n.setStyle({opacity:g}));this.setOpacity(.3),d._ignoreMove=!1,setTimeout(function(){d._animationEnd(),d.fire("spiderfied",{cluster:u,markers:e})},200)},_animationUnspiderfy:function(e){var t,i,r,o,n,s,a=this,l=this._group,u=l._map,d=l._featureGroup,h=e?u._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):u.latLngToLayerPoint(this._latlng),c=this.getAllChildMarkers(),_=L.Path.SVG;for(l._ignoreMove=!0,l._animationStart(),this.setOpacity(1),i=c.length-1;i>=0;i--)t=c[i],t._preSpiderfyLatlng&&(t.closePopup(),t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,s=!0,t._setPos&&(t._setPos(h),s=!1),t.clusterHide&&(t.clusterHide(),s=!1),s&&d.removeLayer(t),_&&(r=t._spiderLeg,o=r._path,n=o.getTotalLength()+.1,o.style.strokeDashoffset=n,r.setStyle({opacity:0})));l._ignoreMove=!1,setTimeout(function(){var e=0;for(i=c.length-1;i>=0;i--)t=c[i],t._spiderLeg&&e++;for(i=c.length-1;i>=0;i--)t=c[i],t._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),e>1&&d.removeLayer(t),u.removeLayer(t._spiderLeg),delete t._spiderLeg);l._animationEnd(),l.fire("unspiderfied",{cluster:a,markers:c})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,i;for(t in e)for(i=e[t].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,i;for(t in e)i=e[t],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(e,t){var i=this.options.icon;return L.setOptions(i,e),this.setIcon(i),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}})}(window,document)},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return"Alla"==e?"Kommun IS NOT NULL":"(Kommun='"+e+"')"}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Alla",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Alla",r=(0,a.default)(e,t,i),o=(0,h.default)(),n=p,s=o.data;s.where=r,s.returnGeometry=!1,s.outSR=null,s.outFields="Kommun",s.orderByFields=null,s.returnDistinctValues=!0,(0,u.default)(o.url,s,o.type,o.datatyp,!0,n,o.error)}Object.defineProperty(t,"__esModule",{value:!0}),t.getRegions=t.getRegionQueryText=t.regions=void 0;var s=i(3),a=r(s),l=i(0),u=r(l),d=i(4),h=r(d),c=i(5),_=[{id:"Alla",label:"Alla"},{id:"Aneby",label:"Aneby"},{id:"Eksjö",label:"Eksjö"},{id:"Gislaved",label:"Gislaved"},{id:"Gnosjö",label:"Gnosjö"},{id:"Habo",label:"Habo"},{id:"Jönköping",label:"Jönköping"},{id:"Mullsjö",label:"Mullsjö"},{id:"Nässjö",label:"Nässjö"},{id:"Sävsjö",label:"Sävsjö"},{id:"Tranås",label:"Tranås"},{id:"Vaggeryd",label:"Vaggeryd"},{id:"Vetlanda",label:"Vetlanda"},{id:"Värnamo",label:"Värnamo"}],p=function(e){var t=[{id:"Alla",label:"Alla"}];$.each(e.features,function(e,i){var r={id:i.attributes.Kommun,label:i.attributes.Kommun};t.push(r)}),(0,c.createSelect)(".region-select",t)};t.regions=_,t.getRegionQueryText=o,t.getRegions=n},function(e,t,i){"use strict";function r(){if(console.log("findlocation navigator function called"),navigator.geolocation){var e={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};navigator.geolocation.getCurrentPosition(o,n,e)}else console.log("Browser doesn't support Geolocation"),s()}function o(e){var t=e.coords;console.log("Your current position is:"),console.log("Latitude : "+t.latitude),console.log("Longitude: "+t.longitude),console.log("Accuracy "+t.accuracy+" meters."),d.map.setView(L.latLng(t.latitude,t.longitude),15),d.sidebar.close()}function n(e){console.warn("ERROR("+e.code+"): "+e.message),s()}function s(){console.log("google geoloation called");var e=function(e){console.log(e);var t=e.location.lat,i=e.location.lng;console.log("Accuracy: "+e.accuracy+" meters"),d.map.setView(L.latLng(t,i),14),a("latlng="+t+","+i),d.sidebar.close()},t=function(e){console.log(e.statusText)};(0,u.default)("https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyALDj8UcNZ1fQlXcoMlJ84lSavkcyODExI",void 0,"POST","json",!0,e,t)}function a(e){var t="https://maps.googleapis.com/maps/api/geocode/json?"+e+"&key=AIzaSyALDj8UcNZ1fQlXcoMlJ84lSavkcyODExI",i=function(e){console.log(e),console.log(e.results[4].address_components[0].short_name);var t=e.results[4].address_components[0].short_name;(0,h.getPoints)(t),$(".region-select").val(t)},r=function(e){console.log(e.statusText)};(0,u.default)(t,void 0,"POST","json",!0,i,r)}Object.defineProperty(t,"__esModule",{value:!0}),t.findLocationWithNavigator=t.findLocationWithGoogleGeolocation=void 0;var l=i(0),u=function(e){return e&&e.__esModule?e:{default:e}}(l),d=i(1),h=i(2);t.findLocationWithGoogleGeolocation=s,t.findLocationWithNavigator=r},function(e,t,i){"use strict";i(9);var r=i(11);!function(e){e&&e.__esModule}(r);i(8),i(12),i(10),i(13),i(14);var o=i(1),n=i(2),s=i(16),a=i(5);(0,o.initMap)(),(0,a.addDropdowns)(),$("#findTreesBtn").click(function(){var e=$(".circumference-select").val(),t=$(".region-select").val(),i=$(".treetype-select").val();(0,n.getPoints)(t,e,i)}),$("#locateBtn").click(function(){(0,s.findLocationWithGoogleGeolocation)()})},function(e,t,i){"use strict";function r(e){return e=e.toLowerCase(),e=="Al".toLowerCase()?"#bf3030":e=="Gråal".toLowerCase()?"#bf3030":e=="Klibbal".toLowerCase()?"#bf3030":e=="Apel".toLowerCase()?"#99574d":e=="Apel-släktet".toLowerCase()?"#99574d":e=="Apel, äpple".toLowerCase()?"#99574d":e=="Malus sp".toLowerCase()?"#99574d":e=="Vildapel".toLowerCase()?"#99574d":e=="Äpple".toLowerCase()?"#99574d":e=="Ask".toLowerCase()?"#e53d00":e=="Asp".toLowerCase()?"red":e=="Blodbok".toLowerCase()?"#31994E":e=="Bok".toLowerCase()?"#31994E":e=="Björk".toLowerCase()?"#732e00":e=="Björk-släktet".toLowerCase()?"#732e00":e=="Glasbjörk".toLowerCase()?"#732e00":e=="Masurbjörk".toLowerCase()?"#732e00":e=="Vårtbjörk".toLowerCase()?"#732e00":e=="Fågelbär".toLowerCase()?"#d97400":e=="Hägg".toLowerCase()?"#d97400":e=="Körsbär".toLowerCase()?"#d97400":e=="Sötkörsbär / fågelbär".toLowerCase()?"#d97400":e=="Kastanj".toLowerCase()?"#ffaa00":e=="Hästkastanj".toLowerCase()?"#ffaa00":e=="Alm".toLowerCase()?"#4c3300":e=="Alm-släktet".toLowerCase()?"#4c3300":e=="Lundalm".toLowerCase()?"#4c3300":e=="Skogsalm".toLowerCase()?"#4c3300":e=="Gran".toLowerCase()?"red":e=="Ädelgran".toLowerCase()?"red":e=="Hagtornsläktet".toLowerCase()?"#333226":e=="Trubbhagtorn".toLowerCase()?"#333226":e=="Hassel".toLowerCase()?"#b6bf30":e=="Avenbok".toLowerCase()?"#50e639":e=="En".toLowerCase()?"#002b40":e=="Kungsen".toLowerCase()?"#002b40":e=="Lärk".toLowerCase()?"#f2b6be":e=="Lärk, europeisk".toLowerCase()?"#f2b6be":e=="Bohuslind".toLowerCase()?"#f27999":e=="Lind".toLowerCase()?"#f27999":e=="Lind-släktet".toLowerCase()?"#f27999":e=="Parklind".toLowerCase()?"#f27999":e=="Skogslind".toLowerCase()?"#f27999":e=="Blodlönn".toLowerCase()?"#66001b":e=="Lönn".toLowerCase()?"#66001b":e=="Tysklönn".toLowerCase()?"#66001b":e=="Bergek".toLowerCase()?"#267F99":e=="Ek".toLowerCase()?"#267F99":e=="Ek-släktet".toLowerCase()?"#267F99":e=="Skogsek".toLowerCase()?"#267F99":e=="Päron".toLowerCase()?"#a6296c":e=="Svarttall".toLowerCase()?"#ff80d5":e=="Tall".toLowerCase()?"#ff80d5":e=="Balsampoppel".toLowerCase()?"#4d003d":e=="Gråpoppel".toLowerCase()?"#4d003d":e=="Poppel".toLowerCase()?"#4d003d":e=="Poppel (utom asp)".toLowerCase()?"#4d003d":e=="Populus sp".toLowerCase()?"#4d003d":e=="Pyramidpoppel".toLowerCase()?"#4d003d":e=="Rönn".toLowerCase()?"#f240ff":e=="Oxel".toLowerCase()?"#8d29a6":e=="Jolster".toLowerCase()?"#6600ff":e=="Knäckepil".toLowerCase()?"#6600ff":e=="Pil".toLowerCase()?"#6600ff":e=="Pil (flera arter)".toLowerCase()?"#6600ff":e=="Salix".toLowerCase()?"#6600ff":e=="Salix (viden m.fl.)".toLowerCase()?"#6600ff":e=="Salix sp".toLowerCase()?"#6600ff":e=="Sälg".toLowerCase()?"#6600ff":e=="Vide".toLowerCase()?"#6600ff":e=="Vitpil".toLowerCase()?"#6600ff":e=="Idegran".toLowerCase()?"#66cc9c":"#000000"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){"Alla"==e&&($(".statpaneSelectRegionwrapper").hide(),$("select.statpaneSelect.region-select").prop("selectedIndex",0));var t=(0,h.default)(e),i=(0,u.default)(),r=c.getPointsSuccess,o=i.data;o.where=t,o.resultRecordCount=10,(0,a.default)(i.url,o,i.type,i.datatyp,i.async,r,i.error)}function n(e){"Alla"==e&&($(".statpaneSelectRegionwrapper").hide(),$("select.statpaneSelect.region-select").prop("selectedIndex",0));var t=(0,h.default)(e),i=JSON.stringify([{statisticType:"count",onStatisticField:"Tradslag",outStatisticFieldName:"TradslagCounts"}]),r=(0,u.default)(),o=function(t){var i=t.features;i.sort(function(e,t){return t.attributes.TradslagCounts-e.attributes.TradslagCounts}),(0,c.getPoints)(e,"Alla",i[0].attributes.Tradslag)},n=r.data;n.where=t,n.outStatistics=i,n.returnGeometry=!1,n.outSR=null,n.orderByFields=null,n.groupByFieldsForStatistics="Tradslag",(0,a.default)(r.url,n,r.type,r.datatyp,r.async,o,r.error)}Object.defineProperty(t,"__esModule",{value:!0}),t.stats=t.showMostCommon=t.showTop10=void 0;var s=i(0),a=r(s),l=i(4),u=r(l),d=i(3),h=r(d),c=i(2),_=[{id:"top10JKPG",label:"Largest 10 Trees Lan"},{id:"top10ByKommun",label:"Largest 10 Trees Kommun"},{id:"MostCommonJKPG",label:"Most Common Tree Lan"},{id:"MostCommonByKommun",label:"Most Common Tree Kommun"}];t.showTop10=o,t.showMostCommon=n,t.stats=_},function(e,t,i){"use strict";function r(e){for(var t={type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:[]},i=0;i<e.length;i++){var r={type:"Feature",properties:{Id:e[i].attributes.OBJECTID_1,Kommun:e[i].attributes.Kommun,Lokalnamn:e[i].attributes.Lokalnamn,Tradslag:e[i].attributes.Tradslag,Stamomkret:e[i].attributes.Stamomkret,Tradstatus:e[i].attributes.Tradstatus},geometry:{type:"Point",coordinates:[e[i].geometry.x,e[i].geometry.y]}};t.features.push(r)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t){L.Control.Sidebar=L.Control.extend({includes:L.Mixin.Events,options:{position:"left"},initialize:function(e,t){var i,r;for(L.setOptions(this,t),this._sidebar=L.DomUtil.get(e),L.DomUtil.addClass(this._sidebar,"sidebar-"+this.options.position),L.Browser.touch&&L.DomUtil.addClass(this._sidebar,"leaflet-touch"),i=this._sidebar.children.length-1;i>=0;i--)r=this._sidebar.children[i],"DIV"==r.tagName&&L.DomUtil.hasClass(r,"sidebar-content")&&(this._container=r);for(this._tabitems=this._sidebar.querySelectorAll("ul.sidebar-tabs > li, .sidebar-tabs > ul > li"),i=this._tabitems.length-1;i>=0;i--)this._tabitems[i]._sidebar=this;for(this._panes=[],this._closeButtons=[],i=this._container.children.length-1;i>=0;i--)if(r=this._container.children[i],"DIV"==r.tagName&&L.DomUtil.hasClass(r,"sidebar-pane")){this._panes.push(r);for(var o=r.querySelectorAll(".sidebar-close"),n=0,s=o.length;s>n;n++)this._closeButtons.push(o[n])}},addTo:function(e){var t,i;for(this._map=e,t=this._tabitems.length-1;t>=0;t--){i=this._tabitems[t];var r=i.querySelector("a");r.hasAttribute("href")&&"#"==r.getAttribute("href").slice(0,1)&&L.DomEvent.on(r,"click",L.DomEvent.preventDefault).on(r,"click",this._onClick,i)}for(t=this._closeButtons.length-1;t>=0;t--)i=this._closeButtons[t],L.DomEvent.on(i,"click",this._onCloseClick,this);return this},removeFrom:function(e){console.log("removeFrom() has been deprecated, please use remove() instead as support for this function will be ending soon."),this.remove(e)},remove:function(){var e,t;for(this._map=null,e=this._tabitems.length-1;e>=0;e--)t=this._tabitems[e],L.DomEvent.off(t.querySelector("a"),"click",this._onClick);for(e=this._closeButtons.length-1;e>=0;e--)t=this._closeButtons[e],L.DomEvent.off(t,"click",this._onCloseClick,this);return this},open:function(e){var t,i;for(t=this._panes.length-1;t>=0;t--)i=this._panes[t],i.id==e?L.DomUtil.addClass(i,"active"):L.DomUtil.hasClass(i,"active")&&L.DomUtil.removeClass(i,"active");for(t=this._tabitems.length-1;t>=0;t--)i=this._tabitems[t],i.querySelector("a").hash=="#"+e?L.DomUtil.addClass(i,"active"):L.DomUtil.hasClass(i,"active")&&L.DomUtil.removeClass(i,"active");return this.fire("content",{id:e}),L.DomUtil.hasClass(this._sidebar,"collapsed")&&(this.fire("opening"),L.DomUtil.removeClass(this._sidebar,"collapsed")),this},close:function(){for(var e=this._tabitems.length-1;e>=0;e--){var t=this._tabitems[e];L.DomUtil.hasClass(t,"active")&&L.DomUtil.removeClass(t,"active")}return L.DomUtil.hasClass(this._sidebar,"collapsed")||(this.fire("closing"),L.DomUtil.addClass(this._sidebar,"collapsed")),this},_onClick:function(){L.DomUtil.hasClass(this,"active")?this._sidebar.close():L.DomUtil.hasClass(this,"disabled")||this._sidebar.open(this.querySelector("a").hash.slice(1))},_onCloseClick:function(){this.close()}}),L.control.sidebar=function(e,t){return new L.Control.Sidebar(e,t)}}]);
//# sourceMappingURL=app.bundle.js.map