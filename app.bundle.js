!function(e){function t(r){if(a[r])return a[r].exports;var i=a[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t,a){"use strict";function r(){return{url:"https://ext-geodata.lansstyrelsen.se/arcgis/rest/services/vektor/LSTF_webbgis_planeringsunderlag/MapServer/58/query",data:{where:"Kommun IS NOT NULL",outFields:"OBJECTID,Kommun,Lokalnamn,Tradslag,Stamomkret,Tradstatus",geometryType:"esriGeometryEnvelope",spatialRel:"esriSpatialRelIntersects",returnGeometry:!0,returnTrueCurves:!1,returnIdsOnly:!1,returnCountOnly:!1,returnZ:!1,returnM:!1,returnDistinctValues:!1,resultRecordCount:null,orderByFields:"Stamomkret DESC",outStatistics:null,outSR:4326,f:"pjson"},type:"GET",datatype:"json",success:function(e){console.log(e)},error:function(e){console.log(e.statusText)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.lanstyrDefault=r},function(e,t,a){"use strict";function r(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json",o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:l;arguments.length>7&&void 0!==arguments[7]&&arguments[7];$.ajax({url:e,data:t,type:a,dataType:r,async:o,success:n,error:s})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=function(e){console.log(e)},l=function(e){console.log(e.statusText)}},function(e,t,a){"use strict";function r(){if((0,v.localStorageKeyExists)("top1000Jkpg")){var e=(0,v.getFromLocalStorage)("top1000Jkpg");console.log(e),(0,p.getPointsSuccess)(e),(0,y.buildTable)(".tree-table",e,!0),(0,y.addRowClickHandler)()}else{(0,g.filterTrees)("Alla","Alla","Alla")}}function i(e,a,r,i){var s;if(x.removeLayer(A),t.geojsonLayer=A=L.geoJSON(e,{pointToLayer:n,onEachFeature:o}).addTo(x),a)x.setView(a,r);else if(!i){s=b.isMobile?[45,0]:[400,0];var c=A.getBounds(),u=l(c);u<.005?x.setView(c.getCenter(),12):x.fitBounds(c,{paddingBottomRight:s})}}function l(e){var t=e.toBBoxString().split(",");Math.abs((t[0]-t[2])*(t[1]-t[3]))}function o(e,t){var a="";e.properties&&(a+="Tradslag: "+e.properties.Tradslag+"</br>",a+="Stamomkret: "+e.properties.Stamomkret+" cm</br>",a+="Status: "+e.properties.Tradstatus+"</br>",a+="Plats: "+e.properties.Lokalnamn+"</br>",a+="Id: "+e.properties.Id+"</br>"),t.bindPopup(a,{autoPanPaddingTopLeft:[65,5],autoPanPaddingBottomRight:[45,5]}),b.isMobile||t.on({mouseover:function(e){t=e.target,t.openPopup()},mouseout:function(e){t=e.target,t.closePopup()}})}function n(e,t){var a=(0,h.getPointSize)(e.properties.Stamomkret);return new L.CircleMarker(t,{radius:a,fillColor:s(e.properties.Tradslag),color:s(e.properties.Tradslag),weight:1,opacity:1,fillOpacity:1,clickable:!0})}function s(e){var t,a=(0,f.trees)();return $.each(a,function(a,r){if(e.match(r.matchWith))return t=r.color,!1}),t}function c(e){$(".legend.leaflet-control").empty();for(var t="",a=0;a<e.length;a++)"Alla"!=e[a].id&&(t+='<i style="background:'+s(e[a].id)+'"></i> '+e[a].id+"</br>");$(".legend.leaflet-control").html(t)}function u(){x.removeLayer(A)}function d(e,t){t?x.setView(e,t):x.setView(e),$.each(x._layers,function(t,a){if(a.feature&&e[0]==a.feature.geometry.coordinates[1]&&e[1]==a.feature.geometry.coordinates[0])return a.openPopup(),b.isMobile&&C.close(),!1})}Object.defineProperty(t,"__esModule",{value:!0}),t.setViewOpenPopup=t.updateGeojsonLayer=t.emptyMap=t.updateLegend=t.geojsonLayer=t.sidebar=t.map=t.initMap=void 0;var m=a(13);!function(e){e&&e.__esModule}(m);a(21),a(12),a(14);var p=a(4),g=a(15),f=a(5),h=a(11),b=a(9),v=a(8),y=a(10),k=L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFyaWdlcnIiLCJhIjoiY2l6NDgxeDluMDAxcjJ3cGozOW1tZnV0NCJ9.Eb2mDsjDBmza-uhme0TLSA",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',id:"mapbox.streets"}),T=L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}.png",{attribution:"Source: Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}),S={Topo:k,Satellite:T},_=L.latLngBounds(L.latLng(56.96162003401705,13.088924617411951),L.latLng(58.147842301716636,15.602056619493775)),x=L.map("map",{layers:[k]});x.fitBounds(_,{paddingBottomRight:[400,0]}),L.control.layers(S,{},{position:"topleft"}).addTo(x);var C=L.control.sidebar("sidebar",{position:"right"}).addTo(x),A=L.geoJSON().addTo(x),w=L.control({position:"bottomleft"});w.onAdd=function(e){return L.DomUtil.create("div","legend")},w.addTo(x),t.initMap=r,t.map=x,t.sidebar=C,t.geojsonLayer=A,t.updateLegend=c,t.emptyMap=u,t.updateGeojsonLayer=i,t.setViewOpenPopup=d},function(e,t,a){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Alla",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Alla",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Alla",r=(0,l.getRegionQueryText)(e),n=(0,i.getCircumferenceQueryText)(t),s=(0,o.getTreetypeQueryText)(a);return[r,s,n].join(" AND ")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=a(11),l=a(16),o=a(5)},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,a,r){v=e.features.length,console.log(v),1e3==e.features.length?($(".results").html("Visar första 1000 resultat<br>Klicka på raden för att se mer info"),$(".results").show()):$(".results").hide();var i=(0,p.default)(e.features);o=i.geojson;var l=i.trees,n=(0,f.removeDuplicateTrees)(l);n.sort(function(e,t){return e.id>t.id?1:t.id>e.id?-1:0}),(0,c.updateLegend)(n),(0,c.updateGeojsonLayer)(o,t,a,r),h.isMobile&&c.sidebar.close()}function l(){var e=(0,s.default)(),t=e.data;t.where="Kommun is not null";t.returnGeometry=!1,t.outSR=null,t.orderByFields=null,t.returnCountOnly=!0;var a=function(e){(0,b.addToLocalStorage)("JkpgLanTreeCount",e.count)};(0,d.default)(e.url,t,e.type,e.datatype,!0,a,e.error)}Object.defineProperty(t,"__esModule",{value:!0}),t.getTreeCount=t.getPointsSuccess=void 0;var o,n=a(0),s=r(n),c=a(2),u=a(1),d=r(u),m=a(19),p=r(m),g=a(3),f=(r(g),a(5)),h=a(9),b=(a(6),a(8)),v=1e3;t.getPointsSuccess=i,t.getTreeCount=l},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return[{family:"zzzz",matchWith:/XXXXX/i,id:"Alla",querytext:"Tradslag is not null",label:"Alla",color:""},{family:"Björkväxter",matchWith:/al$/i,id:"Al",querytext:"Tradslag like '%Al'",label:"Al",color:"#0C2CAB"},{family:"Almväxter",matchWith:/alm/i,id:"Alm",querytext:"Tradslag like '%Alm%'",label:"Alm",color:"#F72530"},{family:"Syrenväxter",matchWith:/ask/i,id:"Ask",querytext:"Tradslag like '%Ask%'",label:"Ask",color:"#732e00"},{family:"Videväxter",matchWith:/^asp/i,id:"Asp",querytext:"Tradslag = 'Asp'",label:"Asp",color:"#3E1380"},{family:"Rosväxter",matchWith:/apel|äpple|malus/i,id:"Äpple",querytext:"Tradslag like '%Apel%' OR Tradslag like '%Äpple%' OR Tradslag like '%malus%'",label:"Äpple",color:"#EB8AAE"},{family:"Björkväxter",matchWith:/avenbok/i,id:"Avenbok",querytext:"Tradslag like '%Avenbok%'",label:"Avenbok",color:"#134D80"},{family:"Björkväxter",matchWith:/björk/i,id:"Björk",querytext:"Tradslag like '%Björk%'",label:"Björk",color:"#090C66"},{family:"Bokväxter",matchWith:/^bok|blodbok/i,id:"Bok",querytext:"Tradslag='Bok' OR Tradslag='Blodbok'",label:"Bok",color:"#424E82"},{family:"Bokväxter",matchWith:/ek/i,id:"Ek",querytext:"Tradslag like '%Ek%'",label:"Ek",color:"#267F99"},{family:"Cypressväxter",matchWith:/en$/i,id:"En",querytext:"Tradslag='En' OR Tradslag='Kungsen'",label:"En",color:"#002b40"},{family:"Tallväxter",matchWith:/^(gran)|(ädelgran)/i,id:"Gran",querytext:"Tradslag='Gran' OR Tradslag='Ädelgran'",label:"Gran",color:"#00802b"},{family:"Björkväxter",matchWith:/hassel/i,id:"Hassel",querytext:"Tradslag like '%Hassel%'",label:"Hassel",color:"#0738FA"},{family:"Rosväxter",matchWith:/hagtorn/i,id:"Hagtorn",querytext:"Tradslag like '%Hagtorn%'",label:"Hagtorn",color:"#CF3C72"},{family:"Idegransväxter",matchWith:/idegran/i,id:"Idegran",querytext:"Tradslag='Idegran'",label:"Idegran",color:"#0CE80C"},{family:"Rosväxter",matchWith:/körsbär|hägg|fågelbär/i,id:"Körsbär",querytext:"Tradslag like '%Körsbär%'OR Tradslag='Hägg' OR Tradslag='Fågelbär'",label:"Körsbär",color:"#F0469D"},{family:"Kinesträdsväxter",matchWith:/kastanj/i,id:"Kastanj",querytext:"Tradslag like '%Kastanj'",label:"Kastanj",color:"#F56B45"},{family:"Tallväxter",matchWith:/lärk/i,id:"Lärk",querytext:"Tradslag like '%Lärk'",label:"Lärk",color:"#00b33c"},{family:"Kinesträdsväxter",matchWith:/lönn/i,id:"Lönn",querytext:"Tradslag like '%Lönn'",label:"Lönn",color:"#FA5311"},{family:"Malvaväxter",matchWith:/lind/i,id:"Lind",querytext:"Tradslag like '%Lind%'",label:"Lind",color:"#ffaa00"},{family:"Rosväxter",matchWith:/oxel/i,id:"Oxel",querytext:"Tradslag like 'Oxel'",label:"Oxel",color:"#F584C4"},{family:"Rosväxter",matchWith:/päron/i,id:"Päron",querytext:"Tradslag like 'Päron'",label:"Päron",color:"#DB099C"},{family:"Videväxter",matchWith:/pil|salix|jolster|sälg|vide/i,id:"Pil",querytext:"Tradslag like '%Pil%' OR Tradslag like '%Salix%' OR Tradslag = 'Jolster' OR Tradslag = 'Sälg' OR Tradslag = 'Vide'",label:"Pil",color:"#8C4DAB"},{family:"Videväxter",matchWith:/poppel|populus/i,id:"Poppel",querytext:"Tradslag like '%Poppel' OR Tradslag = 'Populus sp'",label:"Poppel",color:"#49287A"},{family:"Rosväxter",matchWith:/rönn/i,id:"Rönn",querytext:"Tradslag = 'Rönn'",label:"Rönn",color:"#F21693"},{family:"Tallväxter",matchWith:/tall/i,id:"Tall",querytext:"Tradslag like '%Tall'",label:"Tall",color:"#006600"},{family:"zzzz",matchWith:/annat|övrig|obestämd|okänt/i,id:"Annat",querytext:"Tradslag like 'Övrig%' OR Tradslag = 'Annat' OR Tradslag = 'Obestämd' OR Tradslag = 'Okänt'",label:"Annat/Obestämd",color:"#000000"}]}function l(e){var t,a=i();return $.each(a,function(r,i){if(a[r].id==e)return t="("+a[r].querytext+")",!1}),t}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Alla",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Alla",r=(0,u.default)(e,t,a),i=(0,g.default)(),l=n,o=i.data;o.where=r,o.returnGeometry=!1,o.outSR=null,o.outFields="Tradslag",o.orderByFields="Tradslag",o.returnDistinctValues=!0,(0,m.default)(i.url,o,i.type,i.datatyp,i.async,l,i.error)}function n(e){var t=[];$.each(e.features,function(e,a){t.push(a.attributes.Tradslag)});var a;a=s(t),(0,f.createSelect)(".filterSelect.treetype-select",a)}function s(e){var t,a,r=i(),l=[];for(t=0;t<e.length;t++)for(a=0;a<r.length;a++)if(e[t].match(r[a].matchWith)){l.push(r[a]);break}for(l.sort(function(e,t){return e.id>t.id?1:t.id>e.id?-1:0}),t=0;t<l.length-1;t++)l[t].id==l[t+1].id&&(l.splice(t,1),t--);return l.unshift({family:"zzzz",matchWith:/XXXXX/i,id:"Alla",querytext:"Tradslag is not null",label:"Alla"}),l}Object.defineProperty(t,"__esModule",{value:!0}),t.removeDuplicateTrees=t.getTrees=t.getTreetypeQueryText=t.trees=void 0;var c=a(3),u=r(c),d=a(1),m=r(d),p=a(0),g=r(p),f=a(7);a(2);t.trees=i,t.getTreetypeQueryText=l,t.getTrees=o,t.removeDuplicateTrees=s},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){console.log("findLocationWithNavigator");var e={enableHighAccuracy:!0,timeout:1e4,maximumAge:0};navigator.geolocation?(u(),navigator.geolocation.getCurrentPosition(function(e){l(e)},function(e){o(e)},e)):n()}function l(e){var t=e.coords,a=L.latLng(t.latitude,t.longitude);T.isMobile&&(v.sidebar.close(),console.log(T.isMobile)),c(s(t.latitude,t.longitude),a),d(t.latitude,t.longitude,t.accuracy)}function o(e){console.warn("navigator.geolocation error("+e.code+"): "+e.message),n()}function n(){u(),console.log("google geolocation called");var e=function(e){var t=e.location.lat,a=e.location.lng;d(t,a,e.accuracy);var r=L.latLng(t,a);c(s(t,a),r),T.isMobile&&(v.sidebar.close(),console.log(T.isMobile))},t=function(e){console.log(e.statusText)};(0,f.default)("https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyALDj8UcNZ1fQlXcoMlJ84lSavkcyODExI",void 0,"POST","json",!0,e,t)}function s(e,t){return L.latLng(e,t).toBounds(4e3).toBBoxString()}function c(e,t,a){var r,i=(0,b.default)();r=t?function(e){(0,y.getPointsSuccess)(e,t,16),(0,k.buildTable)(".tree-table",e,!0),(0,k.addRowClickHandler)()}:function(e){(0,y.getPointsSuccess)(e,null,null,a),(0,k.buildTable)(".tree-table",e,!0),(0,k.addRowClickHandler)()};var l=i.data;l.where="",l.geometry=JSON.stringify(e),l.outSR=4326,l.inSR=4326,l.spatialRel="esriSpatialRelContains",(0,f.default)(i.url,l,i.type,i.datatyp,i.async,r,i.error)}function u(){p&&p.remove()}function d(e,t,a){p=L.marker([e,t]).addTo(v.map);var r="";r+="Your location</br>",r+="Accuracy: "+Math.round(a)+" meters</br>",p.bindPopup(r,{autoPanPaddingTopLeft:[65,5],autoPanPaddingBottomRight:[45,5]})}function m(){$("table").empty(),$(".tableBtns").hide(),c(v.map.getBounds().toBBoxString(),null,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.searchVisibleMap=t.findLocationWithNavigator=t.findLocationWithGoogleGeolocation=t.removeLocationMarker=void 0;var p,g=a(1),f=r(g),h=a(0),b=r(h),v=a(2),y=a(4),k=a(10),T=a(9);t.removeLocationMarker=u,t.findLocationWithGoogleGeolocation=n,t.findLocationWithNavigator=i,t.searchVisibleMap=m},function(e,t,a){"use strict";function r(e,t){var a=e+" option";$(a).length>0&&$(e).empty();var r=$(e),i=document.createDocumentFragment();$.each(t,function(e){var a=document.createElement("option");a.innerHTML=t[e].label,a.value=t[e].id,i.appendChild(a)}),r.append(i)}function i(){var e=(0,d.trees)(),t=[{div:".circumference-select",arr:c.circumference},{div:".region-select",arr:u.regions},{div:".treetype-select",arr:e},{div:".stat-select",arr:p.stats}];$.each(t,function(e,t){r(t.div,t.arr)}),l()}function l(){$("#locateBtn").click(function(){(0,g.findLocationWithNavigator)()}),$("#searchVisibleBtn").click(function(){$(".tree-table-div, .stat-table-div").hide(),$(".results").hide(),(0,g.searchVisibleMap)()}),$(".filterSelect").change(function(e){$(".results").hide(),$(".stat-table-div").hide();var t=$(".filterSelect.circumference-select").val(),a=$(".filterSelect.region-select").val(),r=$(".filterSelect.treetype-select").val();(0,s.filterTrees)(a,t,r),n(a,t,r,e.target.classList[1])}),$(".statpaneSelect").change(function(e){(0,m.emptyMap)();var t=$(".stat-select").val(),a=$(".statpaneSelect.region-select").val(),r=$(".statpaneSelect.treetype-select").val();$(".stat-table").empty(),$(".results").hide(),$(".tree-table-div").hide(),"MostCommon"==t?(0,p.showMostCommon)(a,"Alla"):"AvgMax"==t?(0,p.showAvg)(a,r):o()})}function o(){$("select.statpaneSelect.treetype-select").prop("selectedIndex",0),$("select.statpaneSelect.region-select").prop("selectedIndex",0),(0,m.emptyMap)(),console.log("no choice made")}function n(e,t,a,r){"Alla"==t&&"circumference-select"!=r&&(0,c.getCircumferenceRange)(e,t,a),"Alla"==a&&"treetype-select"!=r&&(0,d.getTrees)(e,t,a),"Alla"==e&&"region-select"!=r&&(0,u.getRegions)(e,t,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.updateDropdowns=t.addDropdowns=t.createSelect=void 0;var s=a(15),c=a(11),u=a(16),d=a(5),m=a(2),p=a(18),g=a(6);t.createSelect=r,t.addDropdowns=i,t.updateDropdowns=n},function(e,t,a){"use strict";function r(e){try{var t=window[e],a="__storage_test__";return t.setItem(a,a),t.removeItem(a),!0}catch(e){return!1}}function i(e,t){console.log("adding to local storage"),localStorage.setItem(e,JSON.stringify(t))}function l(e){return console.log("get from Local Storage"),JSON.parse(localStorage.getItem(e))}function o(e){return null!==localStorage.getItem(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.localStorageKeyExists=o,t.addToLocalStorage=i,t.getFromLocalStorage=l,t.storageAvailable=r},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.isMobile=void 0;var i=a(13);r(i);a(12),a(14);var l=a(17),o=r(l),n=a(2),s=(a(4),a(6),a(7)),c=(a(8),(0,o.default)());(0,n.initMap)(),(0,s.addDropdowns)(),t.isMobile=c},function(e,t,a){"use strict";function r(e,t,a){$("table").empty(),$.each(t.features,function(e,a){t.features[e].Tradslag=t.features[e].attributes.Tradslag.replace("-släktet",""),t.features[e].Stamomkret=t.features[e].attributes.Stamomkret.toString(),t.features[e].Lokalnamn=t.features[e].attributes.Lokalnamn});t.features.length;l(e,["Tradslag","cm","Plats"]),n(e,t.features,["Tradslag","Stamomkret","Lokalnamn"],a,!0)}function i(e,t){$("table").empty();var a=$("<caption/>");a.html(t),$(e).append(a)}function l(e,t){var a=$("<tr/>");$.each(t,function(e,t){a.append($('<th class="row'+e.toString()+'"/>').html(t))}),$(e).append(a)}function o(){$("tr").click(function(){var e=$(this).data().lat,t=$(this).data().lng,a=c.map.getZoom();console.log(a),a<10?(0,c.setViewOpenPopup)([e,t],9):(0,c.setViewOpenPopup)([e,t],null)})}function n(e,t,a,r,i){for(var l,o=t.length,n=0;n<o;n++){if(r){var c=t[n].geometry.y.toString(),u=t[n].geometry.x.toString();l=$('<tr data-lng="'+u+'" data-lat="'+c+'" />')}else l=$("<tr/>");for(var d=0;d<a.length;d++)l.append($("<td/>").html(t[n][a[d]]));$(e).append(l)}i&&s(e),$(e+"-div").show()}function s(e){$(e).each(function(){var e=$(this),t=e.find("tr:gt(0)");if(t.length<=11)return void $(".tableBtns").hide();$(".tableBtns").show(),t.filter(":gt(9)").addClass("displayNone");var a=e.siblings(".prev"),r=e.siblings(".next");a.prop("disabled",!0),a.click(function(){var e=t.index(t.not(".displayNone"));return!a.prop("disabled")&&(t.addClass("displayNone"),e-10-1>0?t.filter(":lt("+e+"):gt("+(e-10-1)+")").removeClass("displayNone"):t.filter(":lt("+e+")").removeClass("displayNone"),e-10<=0&&a.prop("disabled",!0),r.prop("disabled",!1),!1)}),r.click(function(){var e=t.index(t.not(".displayNone"));return!r.prop("disabled")&&(t.addClass("displayNone"),t.filter(":lt("+(e+20)+"):gt("+(e+10-1)+")").removeClass("displayNone"),e+20>=t.length&&r.prop("disabled",!0),a.prop("disabled",!1),!1)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.addRowClickHandler=t.addTableData=t.createTableHeader=t.addTableCaption=t.buildTable=void 0;var c=a(2),u=a(20);!function(e){e&&e.__esModule}(u);t.buildTable=r,t.addTableCaption=i,t.createTableHeader=l,t.addTableData=n,t.addRowClickHandler=o},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getPointSize(Stamomkret){return eval(circumference[1].range)?circumference[1].pointsize:eval(circumference[2].range)?circumference[2].pointsize:eval(circumference[3].range)?circumference[3].pointsize:eval(circumference[4].range)?circumference[4].pointsize:eval(circumference[5].range)?circumference[5].pointsize:3}function getCircumferenceQueryText(e){return e==circumference[0].id?"("+circumference[0].querytext+")":e==circumference[1].id?"("+circumference[1].querytext+")":e==circumference[2].id?"("+circumference[2].querytext+")":e==circumference[3].id?"("+circumference[3].querytext+")":e==circumference[4].id?"("+circumference[4].querytext+")":e==circumference[5].id?"("+circumference[5].querytext+")":"(Stamomkret > 0)"}function getCircumferenceRange(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Alla",r=JSON.stringify([{statisticType:"min",onStatisticField:"Stamomkret",outStatisticFieldName:"minStamomkret"},{statisticType:"max",onStatisticField:"Stamomkret",outStatisticFieldName:"maxStamomkret"}]),i=(0,_getWhereCond2.default)(e,t,a),l=(0,_lanstyrDefault2.default)(),o=getCircumSuccess,n=l.data;n.where=i,n.outStatistics=r,n.returnGeometry=!1,n.outSR=null,n.orderByFields=null,(0,_makeAjaxCall2.default)(l.url,n,l.type,l.datatyp,l.async,o,l.error)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPointSize=exports.getCircumferenceRange=exports.getCircumferenceQueryText=exports.circumference=void 0;var _makeAjaxCall=__webpack_require__(1),_makeAjaxCall2=_interopRequireDefault(_makeAjaxCall),_lanstyrDefault=__webpack_require__(0),_lanstyrDefault2=_interopRequireDefault(_lanstyrDefault),_getWhereCond=__webpack_require__(3),_getWhereCond2=_interopRequireDefault(_getWhereCond),_select=__webpack_require__(7),circumference=[{range:"Stamomkret > 0 ",querytext:"Stamomkret > 0",pointsize:null,id:"Alla",label:"Alla"},{range:"Stamomkret > 0 && Stamomkret < 250",querytext:"Stamomkret BETWEEN 0 AND 250",pointsize:3,id:"1",label:"Under 250 cm"},{range:"Stamomkret >= 250 && Stamomkret < 500",querytext:"Stamomkret BETWEEN 251 AND 500",pointsize:5,id:"2",label:"250-500 cm"},{range:"Stamomkret >= 500 && Stamomkret < 750",querytext:"Stamomkret BETWEEN 501 AND 750",pointsize:7,id:"5",label:"500-750"},{range:"Stamomkret >= 750 && Stamomkret < 1000",querytext:"Stamomkret BETWEEN 751 AND 1000",pointsize:10,id:"7",label:"750-1000"},{range:"Stamomkret > 1000",querytext:"Stamomkret > 1000",pointsize:10,id:"10",label:"Over 1000 cm"}],getCircumSuccess=function getCircumSuccess(response){var Stamomkret=response.features[0].attributes.maxStamomkret,filteredCircumference=[],i=circumference.length-1;for(i;i>0;i--)if(eval(circumference[i].range)){filteredCircumference=circumference.slice(0,i+1);break}(0,_select.createSelect)(".filterSelect.circumference-select",filteredCircumference)};exports.circumference=circumference,exports.getCircumferenceQueryText=getCircumferenceQueryText,exports.getCircumferenceRange=getCircumferenceRange,exports.getPointSize=getPointSize},function(e,t){},function(e,t){},function(e,t){},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Alla",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Alla",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Alla",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;(0,l.removeLocationMarker)();var i=(0,n.default)(e,t,a),o=(0,c.default)(),s=o.data;s.where=i,s.resultRecordCount=r;var m=function(r){"Alla"==e&&"Alla"==t&&"Alla"==a&&(0,u.addToLocalStorage)("top1000Jkpg",r),(0,d.getPointsSuccess)(r),(0,g.buildTable)(".tree-table",r,!0),(0,g.addRowClickHandler)()};(0,p.default)(o.url,s,o.type,o.datatype,!0,m,o.error,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.filterTrees=void 0;var l=a(6),o=a(3),n=r(o),s=a(0),c=r(s),u=a(8),d=a(4),m=a(1),p=r(m),g=a(10);t.filterTrees=i},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return"Alla"==e?"Kommun IS NOT NULL":"(Kommun='"+e+"')"}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Alla",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Alla",r=(0,n.default)(e,t,a),i=(0,d.default)(),l=g,o=i.data;o.where=r,o.returnGeometry=!1,o.outSR=null,o.outFields="Kommun",o.orderByFields=null,o.returnDistinctValues=!0,(0,c.default)(i.url,o,i.type,i.datatyp,!0,l,i.error)}Object.defineProperty(t,"__esModule",{value:!0}),t.getRegions=t.getRegionQueryText=t.regions=void 0;var o=a(3),n=r(o),s=a(1),c=r(s),u=a(0),d=r(u),m=a(7),p=[{id:"Alla",label:"Alla"},{id:"Aneby",label:"Aneby"},{id:"Eksjö",label:"Eksjö"},{id:"Gislaved",label:"Gislaved"},{id:"Gnosjö",label:"Gnosjö"},{id:"Habo",label:"Habo"},{id:"Jönköping",label:"Jönköping"},{id:"Mullsjö",label:"Mullsjö"},{id:"Nässjö",label:"Nässjö"},{id:"Sävsjö",label:"Sävsjö"},{id:"Tranås",label:"Tranås"},{id:"Vaggeryd",label:"Vaggeryd"},{id:"Vetlanda",label:"Vetlanda"},{id:"Värnamo",label:"Värnamo"}],g=function(e){var t=[{id:"Alla",label:"Alla"}];$.each(e.features,function(e,a){var r={id:a.attributes.Kommun,label:a.attributes.Kommun};t.push(r)}),(0,m.createSelect)(".filterSelect.region-select",t)};t.regions=p,t.getRegionQueryText=i,t.getRegions=l},function(e,t,a){"use strict";function r(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){$(".statpaneSelectTreeDiv").hide(),$("select.statpaneSelect.treetype-select").prop("selectedIndex",0);var a=(0,m.default)(e,null,t),r=JSON.stringify([{statisticType:"count",onStatisticField:"Tradslag",outStatisticFieldName:"TradslagCounts"}]),i=(0,u.default)(),l=function(t){var a=t.features,r=o(a);r.sort(function(e,t){return t.total-e.total});var i="Tree totals in "+("Alla"==e?"Jönköping Lan":e);(0,g.addTableCaption)(".stat-table",i),(0,g.createTableHeader)(".stat-table",["Tree Type","Total"]),(0,g.addTableData)(".stat-table",r,["label","total"]);var l=0;$.each(r,function(e,t){l+=r[e].total});var n=$('<tr class="boldRow"/>');n.append($("<td/>").html("Total")),n.append($("<td/>").html(l)),$(".stat-table").append(n)},n=i.data;n.where=a,n.outStatistics=r,n.returnGeometry=!1,n.outSR=null,n.orderByFields=null,n.groupByFieldsForStatistics="Tradslag",(0,s.default)(i.url,n,i.type,i.datatyp,i.async,l,i.error)}function l(e,t){$(".statpaneSelectTreeDiv").show();var a=(0,m.default)(e,"Alla",t),r=(0,u.default)(),i=function(a){var r=[{avgStamomkret:a.features[0].attributes.avgStamomkret}];(0,g.addTableCaption)(".stat-table",("Alla"==t?"":t)+" "+("Alla"==e?"JKPG Lan":e)),(0,g.createTableHeader)(".stat-table",["Average Circumference"]),(0,g.addTableData)(".stat-table",r,["avgStamomkret"],!1,!1)},l=JSON.stringify([{statisticType:"avg",onStatisticField:"Stamomkret",outStatisticFieldName:"avgStamomkret"}]),o=r.data;o.where=a,o.outStatistics=l,o.returnGeometry=!1,o.outSR=null,o.orderByFields=null,(0,s.default)(r.url,o,r.type,r.datatyp,r.async,i,r.error)}function o(e){var t=(0,p.trees)();t.shift();var a,r;for(a=0;a<e.length;a++)for(r=0;r<t.length;r++)if(e[a].attributes.Tradslag.match(t[r].matchWith)){void 0===t[r].total&&(t[r].total=0),t[r].total+=e[a].attributes.TradslagCounts;break}return t=$.grep(t,function(e){return void 0!==e.total})}Object.defineProperty(t,"__esModule",{value:!0}),t.addTableData=t.createTableHeader=t.addTableCaption=t.stats=t.showAvg=t.showMostCommon=void 0;var n=a(1),s=r(n),c=a(0),u=r(c),d=a(3),m=r(d),p=(a(4),a(5)),g=a(10),f=[{id:"",label:"Välj Statistik"},{id:"MostCommon",label:"Träd antal"},{id:"AvgMax",label:"Medel Omkrets"}];t.showMostCommon=i,t.showAvg=l,t.stats=f,t.addTableCaption=g.addTableCaption,t.createTableHeader=g.createTableHeader,t.addTableData=g.addTableData},function(e,t,a){"use strict";function r(e){for(var t=[],a={type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:[]},r=0;r<e.length;r++){var i={type:"Feature",properties:{Id:e[r].attributes.OBJECTID,Kommun:e[r].attributes.Kommun,Lokalnamn:e[r].attributes.Lokalnamn,Tradslag:e[r].attributes.Tradslag,Stamomkret:e[r].attributes.Stamomkret,Tradstatus:e[r].attributes.Tradstatus},geometry:{type:"Point",coordinates:[e[r].geometry.x,e[r].geometry.y]}};a.features.push(i),t.push(e[r].attributes.Tradslag)}return{geojson:a,trees:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t){},function(e,t){L.Control.Sidebar=L.Control.extend({includes:L.Evented.prototype||L.Mixin.Events,options:{position:"left"},initialize:function(e,t){var a,r;for(L.setOptions(this,t),this._sidebar=L.DomUtil.get(e),L.DomUtil.addClass(this._sidebar,"sidebar-"+this.options.position),L.Browser.touch&&L.DomUtil.addClass(this._sidebar,"leaflet-touch"),a=this._sidebar.children.length-1;a>=0;a--)"DIV"==(r=this._sidebar.children[a]).tagName&&L.DomUtil.hasClass(r,"sidebar-content")&&(this._container=r);for(this._tabitems=this._sidebar.querySelectorAll("ul.sidebar-tabs > li, .sidebar-tabs > ul > li"),a=this._tabitems.length-1;a>=0;a--)this._tabitems[a]._sidebar=this;for(this._panes=[],this._closeButtons=[],a=this._container.children.length-1;a>=0;a--)if("DIV"==(r=this._container.children[a]).tagName&&L.DomUtil.hasClass(r,"sidebar-pane")){this._panes.push(r);for(var i=r.querySelectorAll(".sidebar-close"),l=0,o=i.length;l<o;l++)this._closeButtons.push(i[l])}},addTo:function(e){var t,a;for(this._map=e,t=this._tabitems.length-1;t>=0;t--){var r=(a=this._tabitems[t]).querySelector("a");r.hasAttribute("href")&&"#"==r.getAttribute("href").slice(0,1)&&L.DomEvent.on(r,"click",L.DomEvent.preventDefault).on(r,"click",this._onClick,a)}for(t=this._closeButtons.length-1;t>=0;t--)a=this._closeButtons[t],L.DomEvent.on(a,"click",this._onCloseClick,this);return this},removeFrom:function(e){console.log("removeFrom() has been deprecated, please use remove() instead as support for this function will be ending soon."),this.remove(e)},remove:function(e){var t,a;for(this._map=null,t=this._tabitems.length-1;t>=0;t--)a=this._tabitems[t],L.DomEvent.off(a.querySelector("a"),"click",this._onClick);for(t=this._closeButtons.length-1;t>=0;t--)a=this._closeButtons[t],L.DomEvent.off(a,"click",this._onCloseClick,this);return this},open:function(e){var t,a;for(t=this._panes.length-1;t>=0;t--)(a=this._panes[t]).id==e?L.DomUtil.addClass(a,"active"):L.DomUtil.hasClass(a,"active")&&L.DomUtil.removeClass(a,"active");for(t=this._tabitems.length-1;t>=0;t--)(a=this._tabitems[t]).querySelector("a").hash=="#"+e?L.DomUtil.addClass(a,"active"):L.DomUtil.hasClass(a,"active")&&L.DomUtil.removeClass(a,"active");return this.fire("content",{id:e}),L.DomUtil.hasClass(this._sidebar,"collapsed")&&(this.fire("opening"),L.DomUtil.removeClass(this._sidebar,"collapsed")),this},close:function(){for(var e=this._tabitems.length-1;e>=0;e--){var t=this._tabitems[e];L.DomUtil.hasClass(t,"active")&&L.DomUtil.removeClass(t,"active")}return L.DomUtil.hasClass(this._sidebar,"collapsed")||(this.fire("closing"),L.DomUtil.addClass(this._sidebar,"collapsed")),this},_onClick:function(){L.DomUtil.hasClass(this,"active")?this._sidebar.close():L.DomUtil.hasClass(this,"disabled")||this._sidebar.open(this.querySelector("a").hash.slice(1))},_onCloseClick:function(){this.close()}}),L.control.sidebar=function(e,t){return new L.Control.Sidebar(e,t)}}]);
//# sourceMappingURL=app.bundle.js.map